<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<title>Insert title here</title>
</head>
<body>
	<h1>꿀팁</h1>
	<br />
	<ul id="categoty" style="color:gray;">
		<li>자취</li>
		<li>이사</li>
		<li>부동산</li>
	</ul>
	<br />
	<h4>꿀팁게시판 - <span th:text="${ct}"></span></h4>
	<div>
		<form action="/tips" method="post" id="postForm">
			<select name="searchType">
	            <option value=title selected>제목</option>
	            <option value="content">내용</option>
	            <option value="user">작성자</option>
	        </select>
	        <input type="text" name="searchWord"/>
			<button type="submit">검색</button>
		</form>
	</div>
	<label th:text="|${pageable.getPageNumber()*pageable.getPageSize()+1} of ${pageResult.getTotalElements()}|"></label>
	
	<hr />
	<hr />
	
	<div>
		<table>
			<thead>
				<tr>
					<th>No.</th>
					<th>제목</th>
					<th>작성자</th>
					<th>작성일</th>
					<th>조회수</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="post,state : ${pageResult.getContent()}">
					<td th:text="${post.postId}"></td>
					<td><a href="@{/post_detail(postId=${post.postId})}" th:text="${post.title}"></a></td>
					<td th:text="${post.user.name}"></td>
					<td th:text="${#temporals.format(post.createDate, 'yyyy-MM-dd')}"></td>
					<td th:text="${post.viewCount}"></td>
				</tr>
			</tbody>
		</table>
	</div>
	
	<div class="row align-items-start mt-3">
		<ul class="col-9 btn-sm pagination justify-content-center">
			<th:block th:if="${bp != 1}">
				<li><a th:href="@{/tips(page=0, pageSize=${ps}, searchType=@{st}, searchWord=${sw})}" class="page-link"><i class="fas fas-backward"></i></a></li>
				<li><a th:href="@{/tips(page=${bp-ns-1}, pageSize=${ps}, searchType=${st}, searchWord=${sw})}" class="page-link"><i class="fas fas-backward"></i></a></li>
			</th:block>
			
			<th:block th:each="page : ${#numbers.sequence(pageInfo.getBeginPage(), pageInfo.getEndPage())}">
				<li class="page-item" th:classappend="${(page-1)==pageInfo.getPage() ? 'active' : ''}"><a class="page-link" th:href="@{/tips(page=${page-1}, pageSize=${ps}, searchType=${st}, searchWord=${sw})}" th:text="${page}" ></a></li>
			</th:block>	
			
			<th:block th:if="${ ep lt tp }">
				<li class="page-item"><a th:href="@{/tips(page=${ep}, pageSize=${ps}, searchType=${st}, searchWord=${sw})}" class="page-link"><i class="fas fa-forward"></i></a></li>				
				<li class="page-item"><a th:href="@{/tips(page=${tp-1}, pageSize=${ps}, searchType=${st}, searchWord=${sw})}" class="page-link"><i class="fas fa-fast-forward"></i></a></li>				
			</th:block>	
		</ul> pagination
		
		<!-- pageSize  --> 
		<div class="col-auto me-1">
			<div class="input-group mb-3">
				<span class="input-group-text"><i class="fas fa-list"></i></span>
				<select class="col-auto form-select" id="rowPerPage" name="rowPerPage">
						<th:block th:each="num : ${#numbers.sequence(10, 50, 10)}">
			    		<option th:value="${num}" th:text="${num}" th:attr="selected=${ps==num ? 'true' : 'false'}"></option>										   					
			    	</th:block>											
				</select>
			</div>
		</div>
	</div>
	
	
	<!-- pageSize 변경 -->
	<script>
		/* $(function() {
			
			// 목록 갯수 변경
			$('#rowPerPage').change(function(e) {
				$('#page').val(0);
				$('#pageSize').val($(this).val());
				$('#postForm').submit();
			});	//#rowPerPage
					
		}) */
	</script>
	
</body>
</html>