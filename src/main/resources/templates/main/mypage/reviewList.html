<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/mypage_layout}">
<th:block layout:fragment="customStyle">
<style th:inline="css" type="text/css">

    .reviewWrapTitle {
        text-align: center;
        font-size: 30px;
        font-weight: 550;
        margin: 100px 0;
    }
	
	
	.reviewtWrap{
		padding: 0 200px;
	}
     table.reviewTable {
        width: 100%;

     }
     
     table.reviewTable th {
		border-top: 2px solid #97a888; 
		border-bottom: 1px solid #97a888; 
		padding: 10px 5px;
     

     }  
     
    table.reviewTable td {
        max-width: 300px; 
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        border-bottom: 1px dotted #E3E3E3;

    }     
          
 	.room-image{
		width: 100px;
		height: 80px;
		margin-top: 10px
	
	} 
	
	.buildName {
		font-size: 13px;
		color: #979797;
	
	}	   	
	.bi-star-fill {
	    color: #86C69F;
	    margin-right: 1px;
		
	} 
    .noMessage{
    	padding : 10px 0;
        text-align: center;
        font-size: 16px;
        color: #9C9A9A;	   
    }   	

	.pagination {
		padding: 0 auto;
		margin: 50px auto;
		display: flex;
		justify-content: center;
		position: relative;
		bottom: 10px;

	}       
	.pagination a {
		width: 30px;
		height: 30px;
		align-items: center;
		justify-content: center;
		float: left;
		display: flex;
		text-decoration: none;
		color: #86C69F;
		line-height: 1.5;
		border-radius: 6px;
	}
	.pagination .arrow-l .bi-play-fill{
		transform: rotate(180deg);
	}
	.pagination .num {
		border: 1.5px solid #dbefcf;
		margin: 0 3.5px;
	}
	.num:hover {
		border: none;
		background: #ebf5e4;
		color: #76BB91;
	}
	.left:hover, .right:hover {
		color: #76BB91;
	}
	.pagination a:active {
		cursor: default;
		color: #448860;
	}
	.pagination .active > a {
		border: none;
		background: #86C69F;
		color: white;
	}	
	.pagination .disabled > a {
	    pointer-events: none;
	    cursor: default;
    }
            
</style>

</th:block>
<th:block layout:fragment="content">
	<div class=reviewWrapTitle>작성한 리뷰 관리</div>  
	<div class=reviewtWrap>  
	    <table class="reviewTable">
	        <thead>
	            <tr>
			        <th style="width: 15%; padding-left: 30px;">매물</th>
			        <th style="width: 15%;">평점</th>
	                <th style="width: 60%;">내용</th>
	                <th style="text-align: center;">작성일</th>
	            </tr>
	        </thead>
	        <tbody>
	            <tr th:each="review : ${reviews}" th:unless="${reviews.empty}" th:onclick="'redirectToRoomDetails(\'' + ${review.room.roomId} + '\');'" style="cursor: pointer;">
	                
	                <td>
	                    <img th:src="@{/room/photo(roomId=${review.room.roomId})}" class="room-image" />
	                    <div th:text="${review.room.buildingName}" class="buildName"></div>
	                </td>
	                <td>
	                    <span th:each="star : ${#numbers.sequence(1, review.score)}" class="bi bi-star-fill"></span>
	                </td>
	                <td th:text="${review.content}"></td>
	                <td th:text="${#temporals.format(review.createDate, 'yyyy-MM-dd')}" style="text-align: center; color: #B2B2B2;"></td>
	            </tr>
	            <tr th:if="${reviews.empty}">
	                <td colspan="4" class="noMessage" >작성한 리뷰가 없습니다!</td>
	            </tr>
	        </tbody>
	    </table>
    </div>
    
	<div class="pagination" th:unless="${reviews.empty}">
	    <ul class="pagination pagination-modal">
	        <li th:class="${reviews.number > 0 ? '' : 'disabled'}">
	            <a th:href="@{/mypage/review/list(page=${reviews.number - 1})}" class="arrow-lf left"><i class="bi bi-rewind-fill"></i></a>
	        </li>
	        <li th:class="${reviews.number > 0 ? '' : 'disabled'}">
	            <a th:href="@{/mypage/review/list(page=${reviews.number - 1})}" class="arrow arrow-l left"><i class="bi bi-play-fill"></i></a>
	        </li>
	        <li th:each="pageNumber : ${#numbers.sequence(0, reviews.totalPages - 1)}" th:class="${pageNumber == reviews.number ? 'active' : ''}">
	            <a th:href="@{/mypage/review/list(page=${pageNumber})}" th:text="${pageNumber + 1}" class="num"></a>
	        </li>
	        <li th:class="${reviews.number < reviews.totalPages - 1 ? '' : 'disabled'}">
	            <a th:href="@{/mypage/review/list(page=${reviews.number + 1})}" class="arrow arrow-r right"><i class="bi bi-play-fill"></i></a>
	        </li>
	        <li th:class="${reviews.number < reviews.totalPages - 1 ? '' : 'disabled'}">
	            <a th:href="@{/mypage/review/list(page=${reviews.totalPages - 1})}" class="arrow-rf right"><i class="bi bi-fast-forward-fill"></i></a>
	        </li>
	    </ul>
	</div>  
</th:block>
<th:block layout:fragment="customScript">
	<script th:inline="javascript" type="text/javascript">
	
    function redirectToRoomDetails(roomId) {
  	  window.location.href = "/room/detail/" + roomId;
  	}   	
	</script>
</th:block>

    